(lang) PS E:\gitlab\agent-notes\langgraph> python rag_flow.py
********************Prompt[rlm/rag-prompt]********************
D:\Anaconda3\envs\lang\Lib\site-packages\langsmith\client.py:272: LangSmithMissingAPIKeyWarning: API key must be provided when using hosted LangSmith API
  warnings.warn(
================================ Human Message =================================

You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don't know the answer, just say that you don't know. Use three sentences maximum and keep the answer concise.
Question: {question}
Context: {context}
Answer:
<IPython.core.display.Image object>
---CALL AGENT---
"----------Output from node 'agent':----------"
{ 'messages': [ AIMessage(content='ä¸ºäº†æ’°å†™ä¸€ä»½é«˜è´¨é‡çš„æ¨æ–‡ä»‹ç»å›½å†…å¤–å¤§å‚å…³äºAgentçš„æœ€æ–°ç ”ç©¶æˆæœï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ”¶é›†ç›¸å…³çš„ä¿¡æ¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä½¿ç”¨æœç´¢å·¥å…·æ¥è·å–è¿™äº›ä¿¡æ¯ã€‚', additional_kwargs={'tool_calls': [{'id': '0196f6eeec41e798a24f9a133dc2c99f', 'function': {'arguments': '{"query": "å›½å†…å¤–å¤§å‚å…³äºAgentçš„æœ€æ–°ç ”ç©¶æˆæœ"}', 'name': 'search_tool'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 64, 'prompt_tokens': 193, 'total_tokens': 257, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'Qwen/Qwen2.5-72B-Instruct', 'system_fingerprint': '', 'id': '0196f6eee44e962ba24ccf8ced8bab20', 'service_tier': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--ea1b61db-498f-44c6-86f8-17e95d6bb1d4-0', tool_calls=[{'name': 'search_tool', 'args': {'query': 'å›½å†…å¤–å¤§å‚å…³äºAgentçš„æœ€æ–°ç ”ç©¶æˆæœ'}, 'id': '0196f6eeec41e798a24f9a133dc2c99f', 'type': 'tool_call'}], usage_metadata={'input_tokens': 193, 'output_tokens': 64, 'total_tokens': 257, 'input_token_details': {}, 'output_token_details': {}})]}

----------------------------------------

---CHECK RELEVANCE---
Error during grading: 1 validation error for grade
  Input should be an object [type=model_type, input_value='Yes', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
"----------Output from node 'retrieve':----------"
{ 'messages': [ ToolMessage(content='["ã€2025ç‰ˆã€‘åˆ†äº«6ç¯‡æœ€æ–°LLM Agentç ”ç©¶æˆæœï¼Œä»é›¶åŸºç¡€åˆ°ç²¾é€šï¼Œç²¾é€šæ”¶è—è¿™ç¯‡å°±å¤Ÿäº†!_2025agentæœ€æ–°è®ºæ–‡: https://blog.csdn.net/wananxuexihu/article/details/146155425", "ä¸­å›½AI Agentåº”ç”¨ç ”ç©¶æŠ¥å‘Š 2024 - InfoQ: https://www.infoq.cn/minibook/bTgj82D3gFJK9ZLRM5Ci", "å¤§å‚çº·çº·å…¥å±€ï¼Œç™¾åº¦ã€é˜¿é‡Œã€å­—èŠ‚æŠ¢å¤ºAgentè¯è¯­æƒ - 53AI-AIçŸ¥è¯†åº“|å¤§æ¨¡å‹çŸ¥è¯†åº“|å¤§æ¨¡å‹è®­ç»ƒ|æ™ºèƒ½ä½“å¼€å‘: https://www.53ai.com/news/LargeLanguageModel/2025052125476.html", "AI Agentå¼•çˆ†AGIæ—¶ä»£ï¼Œåç¯‡ç ”æŠ¥é€è§†AIæ™ºèƒ½ä½“çš„ç°åœ¨ä¸æœªæ¥_æ¾æ¹ƒå·Â·æ¹ƒå®¢_æ¾æ¹ƒæ–°é—»-The Paper: https://www.thepaper.cn/newsDetail_forward_26414255", "2025å¹´ï¼ŒAI Agentå¹²è´§èµ„æ–™ã€è®ºæ–‡ç»¼è¿°éƒ½åœ¨è¿™äº† - çŸ¥ä¹: https://zhuanlan.zhihu.com/p/21147735813", "No results found."]', name='search_tool', id='43cd5917-f3be-4058-85d6-9dfbe80ea33c', tool_call_id='0196f6eeec41e798a24f9a133dc2c99f')]}

----------------------------------------

---TRANSFORM QUERY---
"----------Output from node 'rewrite':----------"
{ 'messages': [ AIMessage(content='Certainly! Here\'s a more refined and detailed version of the question:\n\n"è¯·æœç´¢å¹¶æ±‡æ€»å›½å†…å¤–çŸ¥åç§‘æŠ€å…¬å¸åœ¨Agentï¼ˆæ™ºèƒ½ä»£ç†ï¼‰é¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœï¼Œæ’°å†™ä¸€ä»½é«˜è´¨é‡çš„æ¨æ–‡ï¼Œä»‹ç»è¿™äº›æˆæœçš„å…³é”®ç‚¹å’Œæ½œåœ¨å½±å“ã€‚"', additional_kwargs={}, response_metadata={'finish_reason': 'stop', 'model_name': 'Qwen/Qwen2.5-72B-Instruct'}, id='run--6b015cd7-4898-4631-9077-cab239bbf563-0', usage_metadata={'input_tokens': 4590, 'output_tokens': 1274, 'total_tokens': 5864, 'input_token_details': {}, 'output_token_details': {}})]}

----------------------------------------

---CALL AGENT---
"----------Output from node 'agent':----------"
{ 'messages': [ AIMessage(content='æ ¹æ®æœç´¢ç»“æœï¼Œæˆ‘å°†æ’°å†™ä¸€ä»½é«˜è´¨é‡çš„æ¨æ–‡ï¼Œä»‹ç»å›½å†…å¤–å¤§å‚å…³äºAgentçš„æœ€æ–°ç ”ç©¶æˆæœã€‚ä»¥ä¸‹æ˜¯æ¨æ–‡å†…å®¹ï¼š\n\n---\n\nğŸŒŸ **å›½å†…å¤–å¤§å‚Agentç ”ç©¶æˆæœæ¦‚è§ˆ** ğŸŒŸ\n\néšç€AIæŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼Œæ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰æ­£é€æ¸æˆä¸ºç§‘æŠ€é¢†åŸŸçš„çƒ­ç‚¹ã€‚ä»¥ä¸‹æ˜¯å›½å†…å¤–çŸ¥åç§‘æŠ€å…¬å¸åœ¨Agenté¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœï¼Œè®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿï¼\n\n1. **ä¸­å›½AI Agentåº”ç”¨ç ”ç©¶æŠ¥å‘Š 2024 - InfoQ**\n   - **å…³é”®ç‚¹**ï¼šæŠ¥å‘Šè¯¦ç»†åˆ†æäº†ä¸­å›½AI Agentåœ¨å„ä¸ªè¡Œä¸šçš„åº”ç”¨ç°çŠ¶å’Œæœªæ¥è¶‹åŠ¿ï¼Œç‰¹åˆ«å…³æ³¨äº†é‡‘èã€åŒ»ç–—å’Œæ•™è‚²é¢†åŸŸçš„åˆ›æ–°åº”ç”¨ã€‚\n   - **æ½œåœ¨å½±å“**ï¼šæ¨åŠ¨äº†AI Agentåœ¨å®é™…åœºæ™¯ä¸­çš„è½åœ°ï¼Œæå‡äº†è¡Œä¸šæ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚\n\n2. **å¤§å‚çº·çº·å…¥å±€ï¼Œç™¾åº¦ã€é˜¿é‡Œã€å­—èŠ‚æŠ¢å¤ºAgentè¯è¯­æƒ - 53AI**\n   - **å…³é”®ç‚¹**ï¼šæ–‡ç« ä»‹ç»äº†ç™¾åº¦ã€é˜¿é‡Œå’Œå­—èŠ‚è·³åŠ¨ç­‰å¤§å‚åœ¨Agenté¢†åŸŸçš„æœ€æ–°è¿›å±•ï¼ŒåŒ…æ‹¬è‡ªç„¶è¯­è¨€å¤„ç†ã€å¤šæ¨¡æ€äº¤äº’å’Œæ™ºèƒ½å†³ç­–ç­‰æ–¹é¢çš„æŠ€æœ¯çªç ´ã€‚\n   - **æ½œåœ¨å½±å“**ï¼šåŠ é€Ÿäº†AI AgentæŠ€æœ¯çš„å•†ä¸šåŒ–è¿›ç¨‹ï¼Œä¸ºå¸‚åœºå¸¦æ¥äº†æ›´å¤šåˆ›æ–°äº§å“å’ŒæœåŠ¡ã€‚\n\n3. **AI Agentå¼•çˆ†AGIæ—¶ä»£ï¼Œåç¯‡ç ”æŠ¥é€è§†AIæ™ºèƒ½ä½“çš„ç°åœ¨ä¸æœªæ¥ - æ¾æ¹ƒæ–°é—»**\n   - **å…³é”®ç‚¹**ï¼šæ–‡ç« æ±‡é›†äº†åç¯‡å…³äºAI Agentçš„æœ€æ–°ç ”æŠ¥ï¼Œæ¢è®¨äº†AI Agentåœ¨å®ç°é€šç”¨äººå·¥æ™ºèƒ½ï¼ˆAGIï¼‰æ–¹é¢çš„æ½œåŠ›å’ŒæŒ‘æˆ˜ã€‚\n   - **æ½œåœ¨å½±å“**ï¼šä¸ºå­¦æœ¯ç•Œå’Œäº§ä¸šç•Œæä¾›äº†å®è´µçš„å‚è€ƒï¼Œæ¨åŠ¨äº†AI AgentæŠ€æœ¯çš„è¿›ä¸€æ­¥ç ”ç©¶å’Œåº”ç”¨ã€‚\n\n4. **2025å¹´ï¼ŒAI Agentå¹²è´§èµ„æ–™ã€è®ºæ–‡ç»¼è¿°éƒ½åœ¨è¿™äº† - çŸ¥ä¹**\n   - **å…³é”®ç‚¹**ï¼šçŸ¥ä¹ä¸“æ æ±‡æ€»äº†2025å¹´å…³äºAI Agentçš„æœ€æ–°å¹²è´§èµ„æ–™å’Œè®ºæ–‡ç»¼è¿°ï¼Œæ¶µç›–äº†æŠ€æœ¯åŸç†ã€åº”ç”¨åœºæ™¯å’Œæœªæ¥å±•æœ›ã€‚\n   - **æ½œåœ¨å½±å“**ï¼šä¸ºç ”ç©¶äººå‘˜å’Œå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„å­¦ä¹ èµ„æºï¼Œä¿ƒè¿›äº†AI AgentæŠ€æœ¯çš„æ™®åŠå’Œåˆ›æ–°ã€‚\n\n5. **åˆ†äº«6ç¯‡æœ€æ–°LLM Agentç ”ç©¶æˆæœ - CSDN**\n   - **å…³é”®ç‚¹**ï¼šæ–‡ç« åˆ†äº«äº†6ç¯‡å…³äºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨Agenté¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœï¼ŒåŒ…æ‹¬æ¨¡å‹ä¼˜åŒ–ã€å¤šä»»åŠ¡å­¦ä¹ å’Œäººæœºäº¤äº’ç­‰æ–¹é¢çš„æŠ€æœ¯è¿›å±•ã€‚\n   - **æ½œåœ¨å½±å“**ï¼šæ¨åŠ¨äº†LLMåœ¨Agenté¢†åŸŸçš„åº”ç”¨ï¼Œæå‡äº†æ™ºèƒ½ä»£ç†çš„æ€§èƒ½å’ŒåŠŸèƒ½ã€‚\n\n#AI #Agent #ç§‘æŠ€åˆ›æ–° #æ™ºèƒ½ä»£ç† #å¤§å‚åŠ¨æ€\n\n---\n\nå¸Œæœ›è¿™ä»½æ¨æ–‡èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°äº†è§£å›½å†…å¤–å¤§å‚åœ¨Agenté¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„ä¿¡æ¯ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 551, 'prompt_tokens': 676, 'total_tokens': 1227, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'Qwen/Qwen2.5-72B-Instruct', 'system_fingerprint': '', 'id': '0196f6ef0ca15fb02be3fdb4e34c5955', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--a02b5882-ed27-4ab8-bf05-d1d1147d3e1b-0', usage_metadata={'input_tokens': 676, 'output_tokens': 551, 'total_tokens': 1227, 'input_token_details': {}, 'output_token_details': {}})]}

----------------------------------------


===== æ€»è¾“å‡ºå†…å®¹ï¼ˆæœ€åä¸€æ¬¡è¿­ä»£çš„ outputï¼‰ =====

('æ ¹æ®æœç´¢ç»“æœï¼Œæˆ‘å°†æ’°å†™ä¸€ä»½é«˜è´¨é‡çš„æ¨æ–‡ï¼Œä»‹ç»å›½å†…å¤–å¤§å‚å…³äºAgentçš„æœ€æ–°ç ”ç©¶æˆæœã€‚ä»¥ä¸‹æ˜¯æ¨æ–‡å†…å®¹ï¼š\n'
 '\n'
 '---\n'
 '\n'
 'ğŸŒŸ **å›½å†…å¤–å¤§å‚Agentç ”ç©¶æˆæœæ¦‚è§ˆ** ğŸŒŸ\n'
 '\n'
 'éšç€AIæŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼Œæ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰æ­£é€æ¸æˆä¸ºç§‘æŠ€é¢†åŸŸçš„çƒ­ç‚¹ã€‚ä»¥ä¸‹æ˜¯å›½å†…å¤–çŸ¥åç§‘æŠ€å…¬å¸åœ¨Agenté¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœï¼Œè®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿï¼\n'
 '\n'
 '1. **ä¸­å›½AI Agentåº”ç”¨ç ”ç©¶æŠ¥å‘Š 2024 - InfoQ**\n'
 '   - **å…³é”®ç‚¹**ï¼šæŠ¥å‘Šè¯¦ç»†åˆ†æäº†ä¸­å›½AI Agentåœ¨å„ä¸ªè¡Œä¸šçš„åº”ç”¨ç°çŠ¶å’Œæœªæ¥è¶‹åŠ¿ï¼Œç‰¹åˆ«å…³æ³¨äº†é‡‘èã€åŒ»ç–—å’Œæ•™è‚²é¢†åŸŸçš„åˆ›æ–°åº”ç”¨ã€‚\n'
 '   - **æ½œåœ¨å½±å“**ï¼šæ¨åŠ¨äº†AI Agentåœ¨å®é™…åœºæ™¯ä¸­çš„è½åœ°ï¼Œæå‡äº†è¡Œä¸šæ•ˆç‡å’Œç”¨æˆ·ä½“éªŒã€‚\n'
 '\n'
 '2. **å¤§å‚çº·çº·å…¥å±€ï¼Œç™¾åº¦ã€é˜¿é‡Œã€å­—èŠ‚æŠ¢å¤ºAgentè¯è¯­æƒ - 53AI**\n'
 '   - **å…³é”®ç‚¹**ï¼šæ–‡ç« ä»‹ç»äº†ç™¾åº¦ã€é˜¿é‡Œå’Œå­—èŠ‚è·³åŠ¨ç­‰å¤§å‚åœ¨Agenté¢†åŸŸçš„æœ€æ–°è¿›å±•ï¼ŒåŒ…æ‹¬è‡ªç„¶è¯­è¨€å¤„ç†ã€å¤šæ¨¡æ€äº¤äº’å’Œæ™ºèƒ½å†³ç­–ç­‰æ–¹é¢çš„æŠ€æœ¯çªç ´ã€‚\n'
 '   - **æ½œåœ¨å½±å“**ï¼šåŠ é€Ÿäº†AI AgentæŠ€æœ¯çš„å•†ä¸šåŒ–è¿›ç¨‹ï¼Œä¸ºå¸‚åœºå¸¦æ¥äº†æ›´å¤šåˆ›æ–°äº§å“å’ŒæœåŠ¡ã€‚\n'
 '\n'
 '3. **AI Agentå¼•çˆ†AGIæ—¶ä»£ï¼Œåç¯‡ç ”æŠ¥é€è§†AIæ™ºèƒ½ä½“çš„ç°åœ¨ä¸æœªæ¥ - æ¾æ¹ƒæ–°é—»**\n'
 '   - **å…³é”®ç‚¹**ï¼šæ–‡ç« æ±‡é›†äº†åç¯‡å…³äºAI Agentçš„æœ€æ–°ç ”æŠ¥ï¼Œæ¢è®¨äº†AI Agentåœ¨å®ç°é€šç”¨äººå·¥æ™ºèƒ½ï¼ˆAGIï¼‰æ–¹é¢çš„æ½œåŠ›å’ŒæŒ‘æˆ˜ã€‚\n'
 '   - **æ½œåœ¨å½±å“**ï¼šä¸ºå­¦æœ¯ç•Œå’Œäº§ä¸šç•Œæä¾›äº†å®è´µçš„å‚è€ƒï¼Œæ¨åŠ¨äº†AI AgentæŠ€æœ¯çš„è¿›ä¸€æ­¥ç ”ç©¶å’Œåº”ç”¨ã€‚\n'
 '\n'
 '4. **2025å¹´ï¼ŒAI Agentå¹²è´§èµ„æ–™ã€è®ºæ–‡ç»¼è¿°éƒ½åœ¨è¿™äº† - çŸ¥ä¹**\n'
 '   - **å…³é”®ç‚¹**ï¼šçŸ¥ä¹ä¸“æ æ±‡æ€»äº†2025å¹´å…³äºAI Agentçš„æœ€æ–°å¹²è´§èµ„æ–™å’Œè®ºæ–‡ç»¼è¿°ï¼Œæ¶µç›–äº†æŠ€æœ¯åŸç†ã€åº”ç”¨åœºæ™¯å’Œæœªæ¥å±•æœ›ã€‚\n'
 '   - **æ½œåœ¨å½±å“**ï¼šä¸ºç ”ç©¶äººå‘˜å’Œå¼€å‘è€…æä¾›äº†ä¸°å¯Œçš„å­¦ä¹ èµ„æºï¼Œä¿ƒè¿›äº†AI AgentæŠ€æœ¯çš„æ™®åŠå’Œåˆ›æ–°ã€‚\n'
 '\n'
 '5. **åˆ†äº«6ç¯‡æœ€æ–°LLM Agentç ”ç©¶æˆæœ - CSDN**\n'
 '   - **å…³é”®ç‚¹**ï¼šæ–‡ç« åˆ†äº«äº†6ç¯‡å…³äºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨Agenté¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœï¼ŒåŒ…æ‹¬æ¨¡å‹ä¼˜åŒ–ã€å¤šä»»åŠ¡å­¦ä¹ å’Œäººæœºäº¤äº’ç­‰æ–¹é¢çš„æŠ€æœ¯è¿›å±•ã€‚\n'
 '   - **æ½œåœ¨å½±å“**ï¼šæ¨åŠ¨äº†LLMåœ¨Agenté¢†åŸŸçš„åº”ç”¨ï¼Œæå‡äº†æ™ºèƒ½ä»£ç†çš„æ€§èƒ½å’ŒåŠŸèƒ½ã€‚\n'
 '\n'
 '#AI #Agent #ç§‘æŠ€åˆ›æ–° #æ™ºèƒ½ä»£ç† #å¤§å‚åŠ¨æ€\n'
 '\n'
 '---\n'
 '\n'
 'å¸Œæœ›è¿™ä»½æ¨æ–‡èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°äº†è§£å›½å†…å¤–å¤§å‚åœ¨Agenté¢†åŸŸçš„æœ€æ–°ç ”ç©¶æˆæœã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„ä¿¡æ¯ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼')